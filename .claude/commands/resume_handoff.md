# 핸드오프 문서에서 작업 재개

대화적 과정을 통해 핸드오프 문서에서 작업을 재개하는 것이 당신의 임무입니다. 이 핸드오프들은 이해하고 계속해야 하는 이전 작업 세션의 중요한 컨텍스트, 학습사항, 그리고 다음 단계를 포함합니다.

## 초기 응답

이 명령이 호출될 때:

1. **핸드오프 문서 경로가 제공된 경우**:
   - 핸드오프 문서 경로가 매개변수로 제공된 경우, 기본 메시지를 건너뛰세요
   - 핸드오프 문서를 즉시 전체적으로 읽으세요
   - `thoughts/shared/plans` 또는 `thoughts/shared/research` 아래에 링크된 연구 또는 계획 문서를 즉시 읽으세요. 이 중요한 파일들을 읽기 위해 하위 에이전트를 사용하지 마세요.
   - 핸드오프 문서에서 관련 컨텍스트를 수집하고, 언급된 추가 파일들을 읽어서 분석 과정을 시작하세요
   - 그런 다음 사용자에게 행동 방침을 제안하고 확인하거나, 방향에 대한 명확화를 요청하세요.

2. **티켓 번호(ENG-XXXX 같은)가 제공된 경우**:
   - `thoughts/` 디렉토리가 최신 상태인지 확인하기 위해 `./hack/thoughts_sync.sh`를 실행하세요.
   - 티켓의 가장 최근 핸드오프 문서를 찾으세요. 티켓은 `ENG-XXXX`가 티켓 번호인 `thoughts/shared/handoffs/ENG-XXXX`에 위치할 것입니다. 예: `ENG-2124`의 경우 핸드오프는 `thoughts/shared/handoffs/ENG-2124/`에 있을 것입니다. **이 디렉토리의 내용을 나열하세요.**
   - 디렉토리에 0개, 1개 또는 여러 파일이 있을 수 있습니다.
   - **디렉토리에 파일이 0개이거나 디렉토리가 존재하지 않는 경우**: 사용자에게 "죄송합니다. 해당 핸드오프 문서를 찾을 수 없는 것 같습니다. 경로를 제공해주실 수 있나요?"라고 말하세요.
   - **디렉토리에 파일이 하나만 있는 경우**: 해당 핸드오프로 진행하세요
   - **디렉토리에 여러 파일이 있는 경우**: 파일 이름에 지정된 날짜와 시간(24시간 형식의 `YYYY-MM-DD_HH-MM-SS` 형식)을 사용하여 _가장 최근_ 핸드오프 문서로 진행하세요.
   - 핸드오프 문서를 즉시 전체적으로 읽으세요
   - `thoughts/shared/plans` 또는 `thoughts/shared/research` 아래에 링크된 연구 또는 계획 문서를 즉시 읽으세요; 이 중요한 파일들을 읽기 위해 하위 에이전트를 사용하지 마세요.
   - 핸드오프 문서에서 관련 컨텍스트를 수집하고, 언급된 추가 파일들을 읽어서 분석 과정을 시작하세요
   - 그런 다음 사용자에게 행동 방침을 제안하고 확인하거나, 방향에 대한 명확화를 요청하세요.

3. **매개변수가 제공되지 않은 경우**, 다음과 같이 응답하세요:
```
핸드오프 문서에서 작업을 재개하는 데 도움을 드리겠습니다. 사용 가능한 핸드오프를 찾아보겠습니다.

어떤 핸드오프에서 재개하고 싶으신가요?

팁: 핸드오프 경로로 직접 이 명령을 호출할 수 있습니다: `/resume_handoff `thoughts/shared/handoffs/ENG-XXXX/YYYY-MM-DD_HH-MM-SS_ENG-XXXX_description.md`

또는 해당 티켓의 가장 최근 핸드오프에서 재개하기 위해 티켓 번호를 사용할 수 있습니다: `/resume_handoff ENG-XXXX`
```

그런 다음 사용자의 입력을 기다리세요.

## 프로세스 단계

### 1단계: 핸드오프 읽기 및 분석

1. **핸드오프 문서를 완전히 읽으세요**:
   - limit/offset 매개변수 없이 Read 도구를 사용하세요
   - 모든 섹션을 추출하세요:
     - 작업과 그 상태들
     - 최근 변경사항
     - 학습한 것들
     - 산출물들
     - 액션 아이템과 다음 단계들
     - 기타 참고사항들

2. **집중된 연구 작업을 생성하세요**:
   핸드오프 내용을 바탕으로, 현재 상태를 검증하기 위해 병렬 연구 작업을 생성하세요:

   ```
   작업 1 - 최근 변경사항 검증:
   핸드오프에서 언급된 최근 변경사항이 여전히 존재하는지 확인하세요.
   1. "최근 변경사항" 섹션에서 언급된 파일들을 검증하세요
   2. 설명된 변경사항이 여전히 존재하는지 확인하세요
   3. 후속 수정사항이 있는지 찾아보세요
   4. 충돌이나 회귀를 식별하세요
   사용 도구: Read, Grep, Glob
   반환: file:line 참조와 함께 최근 변경사항의 현재 상태
   ```

   ```
   작업 2 - 현재 코드베이스 상태 검증:
   핸드오프에서 설명된 것에 대해 현재 상태를 검증하세요.
   1. "학습한 것" 섹션에서 언급된 파일들을 확인하세요
   2. 패턴과 구현이 여전히 존재하는지 검증하세요
   3. 핸드오프 이후 중단 변경사항이 있는지 찾아보세요
   4. 핸드오프 이후 추가된 새로운 관련 코드를 식별하세요
   사용 도구: Read, Grep, Glob
   반환: 검증 결과와 발견된 불일치
   ```

   ```
   작업 3 - 산출물 컨텍스트 수집:
   핸드오프에서 언급된 모든 산출물을 읽으세요.
   1. "산출물"에 나열된 기능 문서를 읽으세요
   2. 참조된 구현 계획을 읽으세요
   3. 언급된 연구 문서를 읽으세요
   4. 핵심 요구사항과 결정사항을 추출하세요
   사용 도구: Read
   반환: 산출물 내용과 핵심 결정사항의 요약
   ```

3. **진행하기 전에 모든 하위 작업이 완료될 때까지 기다리세요**

4. **식별된 중요한 파일들을 읽으세요**:
   - "학습한 것" 섹션의 파일들을 완전히 읽으세요
   - 수정사항을 이해하기 위해 "최근 변경사항"의 파일들을 읽으세요
   - 연구 중에 발견된 새로운 관련 파일들을 읽으세요

### 2단계: 분석 종합 및 제시

1. **포괄적인 분석을 제시하세요**:
   ```
   [연구자]가 [날짜]에 작성한 핸드오프를 분석했습니다. 현재 상황은 다음과 같습니다:

   **원본 작업들:**
   - [작업 1]: [핸드오프의 상태] → [현재 검증]
   - [작업 2]: [핸드오프의 상태] → [현재 검증]

   **검증된 핵심 학습사항:**
   - [file:line 참조와 함께 학습사항] - [여전히 유효/변경됨]
   - [발견된 패턴] - [여전히 적용 가능/수정됨]

   **최근 변경사항 상태:**
   - [변경사항 1] - [존재 확인됨/누락됨/수정됨]
   - [변경사항 2] - [존재 확인됨/누락됨/수정됨]

   **검토된 산출물:**
   - [문서 1]: [핵심 요약]
   - [문서 2]: [핵심 요약]

   **권장 다음 액션:**
   핸드오프의 액션 아이템과 현재 상태를 바탕으로:
   1. [핸드오프를 바탕으로 한 가장 논리적인 다음 단계]
   2. [두 번째 우선순위 액션]
   3. [발견된 추가 작업들]

   **식별된 잠재적 문제:**
   - [발견된 충돌이나 회귀]
   - [누락된 의존성이나 깨진 코드]

   [권장 액션 1]로 진행할까요, 아니면 접근 방식을 조정하고 싶으신가요?
   ```

2. **진행하기 전에 확인을 받으세요**

### 3단계: 액션 계획 생성

1. **할 일 목록을 생성하기 위해 TodoWrite를 사용하세요**:
   - 핸드오프의 액션 아이템을 할 일로 변환하세요
   - 분석 중에 발견된 새로운 작업을 추가하세요
   - 의존성과 핸드오프 지침을 바탕으로 우선순위를 정하세요

2. **계획을 제시하세요**:
   ```
   핸드오프와 현재 분석을 바탕으로 할 일 목록을 생성했습니다:

   [할 일 목록 표시]

   첫 번째 작업으로 시작할 준비가 되었나요: [작업 설명]?
   ```

### 4단계: 구현 시작

1. **첫 번째 승인된 작업으로 시작하세요**
2. **구현 전반에 걸쳐 핸드오프의 학습사항을 참조하세요**
3. **핸드오프에 문서화된 패턴과 접근 방식을 적용하세요**
4. **작업이 완료될 때마다 진행 상황을 업데이트하세요**

## 가이드라인

1. **분석에서 철저하게**:
   - 먼저 전체 핸드오프 문서를 읽으세요
   - 언급된 모든 변경사항이 여전히 존재하는지 검증하세요
   - 회귀나 충돌이 있는지 확인하세요
   - 참조된 모든 산출물을 읽으세요

2. **대화적으로**:
   - 작업을 시작하기 전에 발견사항을 제시하세요
   - 접근 방식에 대한 동의를 얻으세요
   - 방향 수정을 허용하세요
   - 현재 상태 vs 핸드오프 상태를 바탕으로 적응하세요

3. **핸드오프 지혜 활용**:
   - "학습한 것" 섹션에 특별한 주의를 기울이세요
   - 문서화된 패턴과 접근 방식을 적용하세요
   - 언급된 실수를 반복하지 마세요
   - 발견된 솔루션을 기반으로 구축하세요

4. **연속성 추적**:
   - 작업 연속성을 유지하기 위해 TodoWrite를 사용하세요
   - 커밋에서 핸드오프 문서를 참조하세요
   - 원본 계획에서의 모든 편차를 문서화하세요
   - 완료되면 새로운 핸드오프 생성을 고려하세요

5. **행동하기 전에 검증**:
   - 핸드오프 상태가 현재 상태와 일치한다고 가정하지 마세요
   - 모든 파일 참조가 여전히 존재하는지 검증하세요
   - 핸드오프 이후 중단 변경사항이 있는지 확인하세요
   - 패턴이 여전히 유효한지 확인하세요

## 일반적인 시나리오

### 시나리오 1: 깔끔한 연속
- 핸드오프의 모든 변경사항이 존재함
- 충돌이나 회귀 없음
- 액션 아이템에 명확한 다음 단계
- 권장 액션으로 진행

### 시나리오 2: 분기된 코드베이스
- 일부 변경사항이 누락되거나 수정됨
- 핸드오프 이후 새로운 관련 코드가 추가됨
- 차이점을 조정해야 함
- 현재 상태를 바탕으로 계획을 적응

### 시나리오 3: 불완전한 핸드오프 작업
- 핸드오프에서 "진행 중"으로 표시된 작업들
- 먼저 미완성 작업을 완료해야 함
- 부분적 구현을 다시 이해해야 할 수 있음
- 새 작업 전에 완료에 집중

### 시나리오 4: 오래된 핸드오프
- 상당한 시간이 경과함
- 주요 리팩토링이 발생함
- 원본 접근 방식이 더 이상 적용되지 않을 수 있음
- 전략을 재평가해야 함

## 상호작용 흐름 예시

```
사용자: /resume_handoff specification/feature/handoffs/handoff-0.md
어시스턴트: 해당 핸드오프 문서를 읽고 분석하겠습니다...

[핸드오프를 완전히 읽음]
[연구 작업을 생성함]
[완료를 기다림]
[식별된 파일들을 읽음]

[날짜]의 핸드오프를 분석했습니다. 현재 상황은 다음과 같습니다...

[분석을 제시함]

웹훅 검증 수정을 구현하는 것으로 진행할까요, 아니면 접근 방식을 조정하고 싶으신가요?

사용자: 네, 웹훅 검증으로 진행하세요
어시스턴트: [할 일 목록을 생성하고 구현을 시작함]
```
